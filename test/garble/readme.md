
## ğŸ“¦ 1. å®‰è£… garble



```
go install mvdan.cc/garble@latest
```

å®‰è£…å®Œæˆåï¼Œ$GOPATH/bin ç›®å½•ä¸‹ä¼šå¤šä¸€ä¸ª garble å¯æ‰§è¡Œæ–‡ä»¶ã€‚

ç¡®è®¤å®‰è£…ï¼š

```
garble -h
```



------





## ğŸ”§ 2. åŸºæœ¬ç”¨æ³•





garble æ˜¯ go å·¥å…·é“¾çš„å°è£…å™¨ï¼Œå®ƒçš„å‘½ä»¤ç”¨æ³•å’Œ go build ä¸€æ ·ï¼Œåªæ˜¯å¤šäº†æ··æ·†åŠŸèƒ½ã€‚





### ç¼–è¯‘å½“å‰é¡¹ç›®ï¼š



```
garble build .
```

ç¼–è¯‘å®Œæˆåï¼Œå½“å‰ç›®å½•ä¸‹ç”Ÿæˆæ··æ·†åçš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼ˆå’Œ go build ä¸€æ ·ï¼‰ã€‚



------





## ğŸ› ï¸ 3. å¸¸ç”¨å‚æ•°



| **å‚æ•°**         | **ä½œç”¨**                                     |
| ---------------- | -------------------------------------------- |
| -literals        | æ··æ·†å­—ç¬¦ä¸²å­—é¢é‡ï¼Œè®©äºŒè¿›åˆ¶ä¸­çœ‹ä¸åˆ°æ˜æ–‡å­—ç¬¦ä¸² |
| -tiny            | å°½å¯èƒ½ç¼©å°äºŒè¿›åˆ¶å¤§å°                         |
| -ldflags="-s -w" | å»é™¤è°ƒè¯•ä¿¡æ¯å’Œç¬¦å·è¡¨ï¼Œè¿›ä¸€æ­¥é™ä½å¯è¯»æ€§       |
| -debugdir=DIR    | ä¿å­˜æ„å»ºè°ƒè¯•ä¿¡æ¯ï¼ˆæ–¹ä¾¿è°ƒè¯•æ··æ·†åçš„ä»£ç ï¼‰     |
| -seed=SEED       | å›ºå®šéšæœºç§å­ï¼Œè®©æ··æ·†å¯é‡å¤                   |
| -tags            | æ”¯æŒ Go build tags                           |
| -trimpath        | ç§»é™¤ç¼–è¯‘è·¯å¾„ä¿¡æ¯                             |



### ç¤ºä¾‹ï¼š



```
garble -literals -tiny build -ldflags="-s -w" .
```

è¿™æ ·å¾—åˆ°çš„äºŒè¿›åˆ¶éå¸¸éš¾é€†å‘ã€‚



------





## ğŸ” 4. è¿è¡Œå’ŒéªŒè¯





è¿è¡Œæ··æ·†åçš„ç¨‹åºï¼š

```
./your_binary
```

æŸ¥çœ‹ç¬¦å·è¡¨ï¼š

```
go tool nm your_binary
```

çœ‹ä¸åˆ°æ­£å¸¸å‡½æ•°åï¼Œå°±è¯´æ˜æ··æ·†æˆåŠŸã€‚



------





## ğŸš€ 5. ä¸ go å‘½ä»¤å®Œå…¨å…¼å®¹





garble æ”¯æŒ build, install, test, run ç­‰å‘½ä»¤ï¼š

```
garble run main.go
garble test ./...
garble install ./...
```



------





## ğŸ¯ æœ€ä½³å®è·µ





1. é¡¹ç›®æœ€åå‘ç‰ˆæ—¶æ··æ·†ï¼Œå¼€å‘è°ƒè¯•é˜¶æ®µä¸è¦æ··æ·†ï¼Œå¦åˆ™è°ƒè¯•ä¼šå¾ˆç—›è‹¦ã€‚
2. é…åˆ Makefile æˆ–è„šæœ¬è‡ªåŠ¨åŒ–æ··æ·†æ„å»ºï¼š



```
build-obf:
	garble build -literals -tiny -ldflags="-s -w" -o app .
```

è¿è¡Œï¼š

```
make build-obf
```

